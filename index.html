<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Queensgate Bouldering Centre - Financial Model</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:-apple-system, BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
      background:#f5f7fa; padding:20px; color:#2c3e50;
    }
    .container { max-width:1200px; margin:0 auto; background:#fff; border-radius:12px; box-shadow:0 2px 10px rgba(0,0,0,.08); overflow:hidden; }
    .header { background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; padding:30px; }
    .header h1 { font-size:2em; margin-bottom:10px; }
    .header p { opacity:.95; line-height:1.5; }
    .content { padding:30px; }

    .key-metrics {
      display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:20px; margin-bottom:30px; padding:20px; background:#f8f9fa; border-radius:10px;
    }
    .metric { text-align:center; }
    .metric-value { font-size:2em; font-weight:700; color:#667eea; }
    .metric-label { font-size:.9em; color:#666; margin-top:5px; }

    .section { margin-bottom:30px; border:1px solid #e0e0e0; border-radius:10px; overflow:hidden; }
    .section-header {
      background:#f8f9fa; padding:15px 20px; border-bottom:1px solid #e0e0e0;
      cursor:pointer; display:flex; justify-content:space-between; align-items:center;
    }
    .section-header:hover { background:#f0f2f5; }
    .section-title { font-size:1.2em; font-weight:600; display:flex; align-items:center; gap:10px; }
    .section-total { font-size:1.3em; font-weight:700; color:#667eea; }
    .section-content { padding:20px; }

    .line-item {
      display:grid; grid-template-columns:1fr 150px 150px; gap:20px; padding:12px 0;
      border-bottom:1px solid #f0f0f0; align-items:center;
    }
    .line-item:last-child { border-bottom:none; }
    .line-item-name { font-size:.95em; }
    .line-item-desc { font-size:.85em; color:#666; margin-top:2px; }
    .line-item input {
      padding:8px; border:1px solid #ddd; border-radius:6px; font-size:1em; text-align:right;
    }
    .line-item input:focus { outline:none; border-color:#667eea; }
    .line-item-total { text-align:right; font-weight:600; }

    .summary-table { background:#f8f9fa; border-radius:10px; padding:20px; margin-top:30px; }
    .summary-table h3 { margin-bottom:12px; color:#2c3e50; }
    .summary-note { font-size:.9em; color:#6a1b9a; margin-bottom:12px; }
    .summary-row {
      display:grid; grid-template-columns:1fr 120px 120px; gap:20px; padding:12px 0; border-bottom:1px solid #e0e0e0;
    }
    .summary-row:last-child { border-bottom:none; font-weight:700; font-size:1.1em; }

    .positive { color:#27ae60; }
    .negative { color:#e74c3c; }

    .assumptions { background:#fff9e6; border:1px solid #ffeb3b; border-radius:10px; padding:20px; margin-bottom:30px; }
    .assumptions h3 { color:#f39c12; margin-bottom:15px; }
    .assumption-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:15px; margin-top:15px; }
    .assumption-item { display:flex; flex-direction:column; gap:5px; }
    .assumption-item label { font-size:.9em; color:#666; }
    .assumption-item input { padding:8px; border:1px solid #ddd; border-radius:6px; }

    .scenario-buttons { display:flex; gap:10px; margin-top:20px; flex-wrap:wrap; }
    .scenario-btn {
      padding:10px 20px; border:2px solid #667eea; background:#fff; color:#667eea;
      border-radius:8px; cursor:pointer; font-weight:600; transition:all .2s; min-height:44px;
    }
    .scenario-btn:hover { background:#667eea; color:#fff; }
    .scenario-btn.active, .scenario-btn[aria-pressed="true"] {
      background:#667eea; color:#fff; box-shadow:0 0 0 2px #667eea22 inset;
    }

    .talking-points { background:#e8f5e9; border:1px solid #4caf50; border-radius:10px; padding:20px; margin-top:30px; }
    .talking-points h3 { color:#2e7d32; margin-bottom:15px; }
    .talking-points ul { margin-left:20px; line-height:1.8; }

    /* Mobile tweaks */
    @media (max-width: 768px){
      .line-item{ grid-template-columns:1fr; gap:10px; }
      .summary-row{ grid-template-columns:1fr; gap:5px; }
    }

    /* Extra mobile optimization */
    :root { --pad-lg:30px; --pad-md:20px; --pad-sm:14px; }
    html,body{ overflow-x:hidden; }
    .header h1{ font-size:clamp(1.25rem,2.5vw + .5rem,2rem); }
    .metric-value{ font-size:clamp(1.25rem,3vw + .25rem,2rem); }
    .summary-table,.section-content{ overflow-x:auto; }
    .key-metrics{ grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); }
    .line-item input,.assumption-item input{ font-size:16px; } /* prevent iOS zoom */
    @media (max-width:992px){ .content{ padding:var(--pad-md); } .section-header{ padding:12px 16px; } }
    @media (max-width:768px){
      .container{ border-radius:0; }
      .content{ padding:var(--pad-sm); }
      .line-item{ grid-template-columns:1fr; gap:8px; }
      .line-item-total{ text-align:left; }
      .summary-row{ grid-template-columns:1fr; gap:6px; }
      .key-metrics{ grid-template-columns:repeat(2,1fr); gap:12px; padding:14px; }
      .scenario-buttons{ gap:8px; }
      .scenario-btn{ flex:1 1 calc(50% - 8px); padding:10px 12px; }
    }
    @media (max-width:400px){ .key-metrics{ grid-template-columns:1fr; } .scenario-btn{ flex:1 1 100%; } }

    /* Validation block styling */
    .validation-box{
      background:#faf7ff; border:1px solid #e0d7f6; border-left:4px solid #6a1b9a;
      padding:16px; border-radius:8px; margin-top:16px;
    }
    .validation-box h4{ margin-bottom:10px; color:#4a148c; }
    .validation-box .val-row{ margin:6px 0; font-size:.95em; }
    .validation-box code{ background:#f3eefc; padding:0 6px; border-radius:4px; }
    .validation-sources{ margin-top:12px; font-size:.9em; color:#555; }
    .validation-sources li{ margin-left:18px; line-height:1.5; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ðŸ§— Queensgate Bouldering Centre - Financial Model</h1>
      <p><strong>Purpose:</strong> Demonstrating profitability and strategic value to Queensgate's asset management through comprehensive financial projections and shopping centre impact analysis.</p>
    </div>

    <div class="content">
      <!-- Key Assumptions -->
      <div class="assumptions">
        <h3>ðŸ”‘ Key Assumptions & Configuration</h3>
        <div class="assumption-grid">
          <div class="assumption-item">
            <label>Facility Size (sqm)</label>
            <input type="number" id="facility-size" value="296" onchange="calculateAll()">
          </div>
          <div class="assumption-item">
            <label>Climbing Wall Area (sqm)</label>
            <input type="number" id="wall-area" value="200" onchange="calculateAll()">
          </div>
          <div class="assumption-item">
            <label>Day Pass Price (Â£)</label>
            <input type="number" id="day-pass-price" value="12.50" step="0.50" onchange="calculateAll()">
          </div>
          <div class="assumption-item">
            <label>Monthly Membership (Â£)</label>
            <input type="number" id="membership-price" value="65" onchange="calculateAll()">
          </div>
          <div class="assumption-item">
            <label>Total Members</label>
            <input type="number" id="members-count" value="300" onchange="calculateAll()">
          </div>
          <div class="assumption-item">
            <label>Day Passes per Month</label>
            <input type="number" id="day-passes-monthly" value="450" onchange="calculateAll()">
          </div>
          <div class="assumption-item">
            <label>Annual Rent (Â£)</label>
            <input type="number" id="annual-rent" value="70000" onchange="calculateAll()">
          </div>
        </div>

        <div class="scenario-buttons" role="group" aria-label="Scenario">
          <button class="scenario-btn" data-scenario="conservative" aria-pressed="false">Conservative</button>
          <button class="scenario-btn" data-scenario="realistic" aria-pressed="false">Realistic</button>
          <button class="scenario-btn" data-scenario="optimistic" aria-pressed="false">Optimistic</button>
        </div>
      </div>

      <!-- Key Metrics -->
      <div class="key-metrics">
        <div class="metric">
          <div class="metric-value" id="total-capex">Â£0</div>
          <div class="metric-label">Total CAPEX</div>
        </div>
        <div class="metric">
          <div class="metric-value" id="annual-revenue">Â£0</div>
          <div class="metric-label">Annual Revenue</div>
        </div>
        <div class="metric">
          <div class="metric-value" id="annual-profit">Â£0</div>
          <div class="metric-label">Annual Profit/Loss</div>
        </div>
        <div class="metric">
          <div class="metric-value" id="roi">0%</div>
          <div class="metric-label">ROI</div>
        </div>
        <div class="metric">
          <div class="metric-value" id="payback-period">0 years</div>
          <div class="metric-label">Payback Period</div>
        </div>
      </div>

      <!-- CAPEX Section -->
      <div class="section">
        <div class="section-header">
          <div class="section-title">ðŸ’° Capital Expenditure (One-Time Setup)</div>
          <div class="section-total" id="capex-total">Â£0</div>
        </div>
        <div class="section-content">
          <div class="line-item">
            <div>
              <div class="line-item-name">Climbing Wall Construction</div>
              <div class="line-item-desc">200 mÂ² Ã— Â£300</div>
            </div>
            <input type="number" id="wall-cost-per-sqm" value="300" onchange="calculateAll()">
            <div class="line-item-total" id="wall-cost-total">Â£60,000</div>
          </div>
          <div class="line-item">
            <div>
              <div class="line-item-name">Safety Matting</div>
              <div class="line-item-desc">220 mÂ² Ã— Â£150</div>
            </div>
            <input type="number" id="matting-cost-per-sqm" value="150" onchange="calculateAll()">
            <div class="line-item-total" id="matting-cost-total">Â£33,000</div>
          </div>
          <div class="line-item">
            <div>
              <div class="line-item-name">Gym Equipment & Training Area</div>
            </div>
            <input type="number" id="gym-equipment" value="30000" onchange="calculateAll()">
            <div class="line-item-total" id="gym-equipment-total">Â£30,000</div>
          </div>
          <div class="line-item">
            <div>
              <div class="line-item-name">Facility Fit-Out</div>
            </div>
            <input type="number" id="fit-out-other" value="50000" onchange="calculateAll()">
            <div class="line-item-total" id="fit-out-other-total">Â£50,000</div>
          </div>
          <div class="line-item">
            <div>
              <div class="line-item-name">Initial Climbing Holds Stock</div>
            </div>
            <input type="number" id="holds-budget" value="20000" onchange="calculateAll()">
            <div class="line-item-total" id="holds-budget-total">Â£20,000</div>
          </div>
          <div class="line-item">
            <div>
              <div class="line-item-name">Pre-Launch & Marketing</div>
            </div>
            <input type="number" id="branding-marketing" value="15000" onchange="calculateAll()">
            <div class="line-item-total" id="branding-marketing-total">Â£15,000</div>
          </div>
          <div class="line-item">
            <div>
              <div class="line-item-name">Software & POS System</div>
            </div>
            <input type="number" id="software-pos" value="1000" onchange="calculateAll()">
            <div class="line-item-total" id="software-pos-total">Â£1,000</div>
          </div>
          <div class="line-item">
            <div>
              <div class="line-item-name">Licenses & Permits</div>
            </div>
            <input type="number" id="licenses-permits" value="3000" onchange="calculateAll()">
            <div class="line-item-total" id="licenses-permits-total">Â£3,000</div>
          </div>
        </div>
      </div>

      <!-- Revenue -->
      <div class="section">
        <div class="section-header">
          <div class="section-title">ðŸ“ˆ Annual Revenue Streams</div>
          <div class="section-total" id="revenue-total">Â£0</div>
        </div>
        <div class="section-content">
          <div class="line-item">
            <div class="line-item-name">Membership Revenue</div>
            <input type="number" id="membership-price" value="65" onchange="calculateAll()">
            <input type="number" id="members-count" value="300" onchange="calculateAll()">
            <div class="line-item-total" id="membership-revenue-total">Â£234,000</div>
          </div>
          <div class="line-item">
            <div class="line-item-name">Day Pass Revenue</div>
            <input type="number" id="day-passes-monthly" value="450" onchange="calculateAll()">
            <input type="number" id="day-pass-price" value="12.5" onchange="calculateAll()">
            <div class="line-item-total" id="day-pass-revenue-total">Â£67,500</div>
          </div>
          <div class="line-item">
            <div class="line-item-name">Coaching & Classes</div>
            <input type="number" id="coaching-sessions" value="30" onchange="calculateAll()">
            <input type="number" id="coaching-price" value="50" onchange="calculateAll()">
            <div class="line-item-total" id="coaching-revenue-total">Â£18,000</div>
          </div>
          <div class="line-item">
            <div class="line-item-name">Youth Programs & Parties</div>
            <input type="number" id="parties-monthly" value="8" onchange="calculateAll()">
            <input type="number" id="party-revenue" value="120" onchange="calculateAll()">
            <div class="line-item-total" id="youth-revenue-total">Â£11,520</div>
          </div>
          <div class="line-item">
            <div class="line-item-name">Equipment Rental</div>
            <input type="number" id="rental-monthly" value="500" onchange="calculateAll()">
            <div class="line-item-total" id="rental-revenue-total">Â£6,000</div>
          </div>
          <div class="line-item">
            <div class="line-item-name">Retail Sales</div>
            <input type="number" id="retail-monthly" value="800" onchange="calculateAll()">
            <div class="line-item-total" id="retail-revenue-total">Â£9,600</div>
          </div>
          <div class="line-item">
            <div class="line-item-name">CafÃ© Revenue (Net)</div>
            <input type="number" id="cafe-monthly" value="2500" onchange="calculateAll()">
            <input type="number" id="cafe-margin" value="7.5" onchange="calculateAll()">
            <div class="line-item-total" id="cafe-revenue-total">Â£2,250</div>
          </div>
        </div>
      </div>

      <!-- Expenses -->
      <div class="section">
        <div class="section-header">
          <div class="section-title">ðŸ’¸ Annual Operating Expenses (OPEX)</div>
          <div class="section-total" id="expenses-total">Â£0</div>
        </div>
        <div class="section-content">
          <div class="line-item"><div class="line-item-name">Annual Rent</div><div class="line-item-total" id="rent-cost-total">Â£70,000</div></div>
          <div class="line-item"><div class="line-item-name">Business Rates</div><input type="number" id="business-rates" value="26000" onchange="calculateAll()"><div class="line-item-total" id="business-rates-total">Â£26,000</div></div>
          <div class="line-item"><div class="line-item-name">Centre Manager</div><input type="number" id="manager-salary" value="32000" onchange="calculateAll()"><div class="line-item-total" id="manager-salary-total">Â£32,000</div></div>
          <div class="line-item"><div class="line-item-name">Route Setter</div><input type="number" id="route-setter-salary" value="22000" onchange="calculateAll()"><div class="line-item-total" id="route-setter-salary-total">Â£22,000</div></div>
          <div class="line-item"><div class="line-item-name">Other Staff</div><input type="number" id="other-staff" value="30000" onchange="calculateAll()"><div class="line-item-total" id="other-staff-total">Â£30,000</div></div>
          <div class="line-item"><div class="line-item-name">Utilities</div><input type="number" id="utilities" value="18000" onchange="calculateAll()"><div class="line-item-total" id="utilities-total">Â£18,000</div></div>
          <div class="line-item"><div class="line-item-name">Insurance</div><input type="number" id="insurance" value="2000" onchange="calculateAll()"><div class="line-item-total" id="insurance-total">Â£2,000</div></div>
          <div class="line-item"><div class="line-item-name">Marketing</div><input type="number" id="marketing-annual" value="8000" onchange="calculateAll()"><div class="line-item-total" id="marketing-annual-total">Â£8,000</div></div>
          <div class="line-item"><div class="line-item-name">Maintenance</div><input type="number" id="maintenance" value="6000" onchange="calculateAll()"><div class="line-item-total" id="maintenance-total">Â£6,000</div></div>
        </div>
      </div>

      <!-- Financial Summary -->
      <div class="summary-table">
        <h3>ðŸ“Š Annual Financial Performance</h3>
        <div class="summary-row"><div>Total Annual Revenue</div><div id="annual-revenue-summary">Â£0</div></div>
        <div class="summary-row"><div>Total Annual Expenses</div><div id="annual-expenses-summary">Â£0</div></div>
        <div class="summary-row"><div>Annual Profit (EBITDA)</div><div id="annual-ebitda" class="negative">Â£0</div></div>
        <div class="summary-row"><div>Profit Margin</div><div id="annual-margin">0%</div></div>
        <div class="summary-row"><div>ROI</div><div id="roi-summary">0%</div></div>
        <div class="summary-row"><div>Payback</div><div id="payback-summary">0 years</div></div>
      </div>

      <!-- Sources -->
      <div class="talking-points" style="background:#e3f2fd; border-color:#2196f3;">
        <h3 style="color:#1565c0;">ðŸ“š Data Sources & Validation</h3>
        <ul>
          <li>Floorplan: Queensgate Auditorium 10 (296 mÂ²)</li>
          <li>CAPEX & OPEX benchmarks: Core Climbing, Kong Climbing, UK Climbing Wall industry data</li>
          <li>Rent confirmed: Â£70,000 p.a. (Queensgate)</li>
          <li>Market size & growth: BMC, UK Active Leisure 2022â€“24 reports</li>
          <li>Demographics: ONS Peterborough population base</li>
        </ul>
      </div>
    </div>
  </div>

<script>
function formatCurrency(value){
  const formatted = Math.abs(value).toLocaleString();
  return value < 0 ? '-Â£' + formatted : 'Â£' + formatted;
}
function formatPercent(value){ return (isFinite(value) ? value : 0).toFixed(1) + '%'; }

function calculateAll(){
  const facilitySize = parseFloat(document.getElementById('facility-size').value) || 296;
  const wallArea = parseFloat(document.getElementById('wall-area').value) || 200;
  const wallCostPerSqm = parseFloat(document.getElementById('wall-cost-per-sqm').value) || 300;
  const mattingCostPerSqm = parseFloat(document.getElementById('matting-cost-per-sqm').value) || 150;
  const gymEquipment = parseFloat(document.getElementById('gym-equipment').value) || 30000;
  const fitOutOther = parseFloat(document.getElementById('fit-out-other').value) || 50000;
  const holdsBudget = parseFloat(document.getElementById('holds-budget').value) || 20000;
  const brandingMarketing = parseFloat(document.getElementById('branding-marketing').value) || 15000;
  const softwarePos = parseFloat(document.getElementById('software-pos').value) || 1000;
  const licensesPermits = parseFloat(document.getElementById('licenses-permits').value) || 3000;

  const wallCost = wallArea * wallCostPerSqm;
  const mattingCost = 220 * mattingCostPerSqm;
  const totalCapex = wallCost + mattingCost + gymEquipment + fitOutOther + holdsBudget + brandingMarketing + softwarePos + licensesPermits;

  const membershipPrice = parseFloat(document.getElementById('membership-price').value) || 65;
  const membersCount = parseFloat(document.getElementById('members-count').value) || 300;
  const dayPassPrice = parseFloat(document.getElementById('day-pass-price').value) || 12.5;
  const dayPassesMonthly = parseFloat(document.getElementById('day-passes-monthly').value) || 450;
  const coachingSessions = parseFloat(document.getElementById('coaching-sessions').value) || 30;
  const coachingPrice = parseFloat(document.getElementById('coaching-price').value) || 50;
  const partiesMonthly = parseFloat(document.getElementById('parties-monthly').value) || 8;
  const partyRevenue = parseFloat(document.getElementById('party-revenue').value) || 120;
  const rentalMonthly = parseFloat(document.getElementById('rental-monthly').value) || 500;
  const retailMonthly = parseFloat(document.getElementById('retail-monthly').value) || 800;
  const cafeMonthly = parseFloat(document.getElementById('cafe-monthly').value) || 2500;
  const cafeMargin = parseFloat(document.getElementById('cafe-margin').value) || 7.5;

  const membershipRevenue = membersCount * membershipPrice * 12;
  const dayPassRevenue = dayPassesMonthly * dayPassPrice * 12;
  const coachingRevenue = coachingSessions * coachingPrice * 12;
  const youthRevenue = partiesMonthly * partyRevenue * 12;
  const rentalRevenue = rentalMonthly * 12;
  const retailRevenue = retailMonthly * 12;
  const cafeNetRevenue = cafeMonthly * (cafeMargin/100) * 12;
  const totalRevenue = membershipRevenue + dayPassRevenue + coachingRevenue + youthRevenue + rentalRevenue + retailRevenue + cafeNetRevenue;

  const rent = 70000;
  const businessRates = parseFloat(document.getElementById('business-rates').value) || 26000;
  const managerSalary = parseFloat(document.getElementById('manager-salary').value) || 32000;
  const routeSetterSalary = parseFloat(document.getElementById('route-setter-salary').value) || 22000;
  const otherStaff = parseFloat(document.getElementById('other-staff').value) || 30000;
  const utilities = parseFloat(document.getElementById('utilities').value) || 18000;
  const insurance = parseFloat(document.getElementById('insurance').value) || 2000;
  const marketingAnnual = parseFloat(document.getElementById('marketing-annual').value) || 8000;
  const maintenance = parseFloat(document.getElementById('maintenance').value) || 6000;
  const totalExpenses = rent + businessRates + managerSalary + routeSetterSalary + otherStaff + utilities + insurance + marketingAnnual + maintenance;

  const annualProfit = totalRevenue - totalExpenses;
  const roi = totalCapex > 0 ? (annualProfit/totalCapex)*100 : 0;
  const payback = annualProfit>0 ? totalCapex/annualProfit : 0;
  const margin = totalRevenue>0 ? (annualProfit/totalRevenue)*100 : 0;

  document.getElementById('wall-cost-total').textContent = formatCurrency(wallCost);
  document.getElementById('matting-cost-total').textContent = formatCurrency(mattingCost);
  document.getElementById('gym-equipment-total').textContent = formatCurrency(gymEquipment);
  document.getElementById('fit-out-other-total').textContent = formatCurrency(fitOutOther);
  document.getElementById('holds-budget-total').textContent = formatCurrency(holdsBudget);
  document.getElementById('branding-marketing-total').textContent = formatCurrency(brandingMarketing);
  document.getElementById('software-pos-total').textContent = formatCurrency(softwarePos);
  document.getElementById('licenses-permits-total').textContent = formatCurrency(licensesPermits);
  document.getElementById('capex-total').textContent = formatCurrency(totalCapex);

  document.getElementById('membership-revenue-total').textContent = formatCurrency(membershipRevenue);
  document.getElementById('day-pass-revenue-total').textContent = formatCurrency(dayPassRevenue);
  document.getElementById('coaching-revenue-total').textContent = formatCurrency(coachingRevenue);
  document.getElementById('youth-revenue-total').textContent = formatCurrency(youthRevenue);
  document.getElementById('rental-revenue-total').textContent = formatCurrency(rentalRevenue);
  document.getElementById('retail-revenue-total').textContent = formatCurrency(retailRevenue);
  document.getElementById('cafe-revenue-total').textContent = formatCurrency(cafeNetRevenue);
  document.getElementById('revenue-total').textContent = formatCurrency(totalRevenue);

  document.getElementById('rent-cost-total').textContent = formatCurrency(rent);
  document.getElementById('business-rates-total').textContent = formatCurrency(businessRates);
  document.getElementById('manager-salary-total').textContent = formatCurrency(managerSalary);
  document.getElementById('route-setter-salary-total').textContent = formatCurrency(routeSetterSalary);
  document.getElementById('other-staff-total').textContent = formatCurrency(otherStaff);
  document.getElementById('utilities-total').textContent = formatCurrency(utilities);
  document.getElementById('insurance-total').textContent = formatCurrency(insurance);
  document.getElementById('marketing-annual-total').textContent = formatCurrency(marketingAnnual);
  document.getElementById('maintenance-total').textContent = formatCurrency(maintenance);
  document.getElementById('expenses-total').textContent = formatCurrency(totalExpenses);

  document.getElementById('annual-revenue').textContent = formatCurrency(totalRevenue);
  document.getElementById('annual-expenses-summary').textContent = formatCurrency(totalExpenses);
  document.getElementById('annual-revenue-summary').textContent = formatCurrency(totalRevenue);
  document.getElementById('annual-profit').textContent = formatCurrency(annualProfit);
  document.getElementById('annual-ebitda').textContent = formatCurrency(annualProfit);
  document.getElementById('annual-margin').textContent = formatPercent(margin);
  document.getElementById('roi').textContent = formatPercent(roi);
  document.getElementById('roi-summary').textContent = formatPercent(roi);
  document.getElementById('payback-period').textContent = payback>0 ? payback.toFixed(1)+' years' : 'N/A';
  document.getElementById('payback-summary').textContent = payback>0 ? payback.toFixed(1)+' years' : 'N/A';
  document.getElementById('annual-profit').className = annualProfit>0 ? 'metric-value positive' : 'metric-value negative';
}

function updateScenarioButtons(active){
  document.querySelectorAll('.scenario-btn').forEach(btn=>{
    const isActive = btn.dataset.scenario === active;
    btn.classList.toggle('active', isActive);
    btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');
  });
}

function applyScenarioValues(scenario){
  const scenarios = {
    conservative: {
      'members-count': 220, 'day-passes-monthly': 350,
      'coaching-sessions': 20, 'parties-monthly': 5,
      'rental-monthly': 350, 'retail-monthly': 600, 'cafe-monthly': 2000,
      'manager-salary': 32000,'route-setter-salary':20000,'other-staff':25000
    },
    realistic: { /* already default */ },
    optimistic: {
      'members-count': 380, 'day-passes-monthly': 600,
      'coaching-sessions': 45, 'parties-monthly': 12,
      'rental-monthly': 700, 'retail-monthly': 1200, 'cafe-monthly': 4000,
      'manager-salary': 35000,'route-setter-salary':25000,'other-staff':35000
    }
  };
  const values = scenarios[scenario];
  if(values){
    Object.keys(values).forEach(k=>{
      const el=document.getElementById(k);
      if(el) el.value=values[k];
    });
  }
}

window.addEventListener('load', ()=>{
  updateScenarioButtons('realistic');
  calculateAll();
});
</script>
</body>
</html>
